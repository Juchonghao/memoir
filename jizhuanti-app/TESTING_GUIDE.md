# 语音功能测试指南

## 测试环境
- **生产URL**: https://0kcpiov9wof8.space.minimaxi.com
- **推荐浏览器**: Chrome、Edge或Safari
- **需要设备**: 麦克风、扬声器/耳机

## 必测项目清单

### 第一部分：基础访问测试
- [ ] 1.1 访问首页是否正常加载
- [ ] 1.2 导航到登录页面
- [ ] 1.3 完成登录/注册流程
- [ ] 1.4 进入章节选择页面
- [ ] 1.5 选择任意章节进入访谈页面

### 第二部分：语音识别功能测试（重点）
- [ ] 2.1 检查页面是否显示麦克风按钮（蓝紫色渐变）
- [ ] 2.2 点击麦克风按钮，浏览器是否弹出麦克风权限请求
- [ ] 2.3 允许麦克风权限后，按钮是否变红并闪烁
- [ ] 2.4 是否显示"正在录音中"的红色状态栏
- [ ] 2.5 对着麦克风说话，是否实时显示识别文本
- [ ] 2.6 再次点击按钮停止录音
- [ ] 2.7 识别结果是否正确填入文本框
- [ ] 2.8 测试识别准确度：
  - 说"你好，我是XXX"
  - 说"我的童年在XXX度过"
  - 说简短句子（10-20字）

### 第三部分：语音合成功能测试（重点）
- [ ] 3.1 发送消息后，AI回复时是否显示蓝色播放状态栏
- [ ] 3.2 是否听到AI语音朗读回复内容
- [ ] 3.3 语音是否清晰流畅
- [ ] 3.4 点击暂停按钮，语音是否暂停
- [ ] 3.5 点击继续按钮，语音是否恢复播放
- [ ] 3.6 点击停止按钮，语音是否立即停止

### 第四部分：混合交互测试
- [ ] 4.1 使用语音输入一次消息
- [ ] 4.2 使用文本输入一次消息
- [ ] 4.3 语音识别后编辑文本再发送
- [ ] 4.4 关闭"自动播放AI语音"开关
- [ ] 4.5 确认AI回复不再自动播放语音
- [ ] 4.6 重新开启自动播放开关

### 第五部分：错误处理测试
- [ ] 5.1 在不支持的浏览器（Firefox）中测试
- [ ] 5.2 拒绝麦克风权限，是否显示错误提示
- [ ] 5.3 在嘈杂环境下测试识别效果
- [ ] 5.4 测试录音时点击其他功能是否正常

### 第六部分：原有功能兼容性测试
- [ ] 6.1 记忆镜像上传功能是否正常
- [ ] 6.2 时代背景显示是否正常
- [ ] 6.3 AI记者头像显示是否正常
- [ ] 6.4 完成访谈按钮是否可用

### 第七部分：响应式设计测试
- [ ] 7.1 在桌面端浏览器测试（1920x1080）
- [ ] 7.2 缩小浏览器窗口测试响应式布局
- [ ] 7.3 使用手机浏览器测试（如有设备）
- [ ] 7.4 检查移动端语音按钮大小是否合适
- [ ] 7.5 检查移动端录音功能是否正常

### 第八部分：性能和稳定性测试
- [ ] 8.1 连续使用语音输入5次
- [ ] 8.2 连续播放AI语音5次
- [ ] 8.3 快速切换录音开始/停止
- [ ] 8.4 检查控制台是否有错误信息
- [ ] 8.5 检查页面响应速度是否正常

## 测试步骤详解

### 如何测试语音识别
1. 打开 https://0kcpiov9wof8.space.minimaxi.com
2. 登录后进入访谈页面
3. 找到输入框左侧的蓝紫色麦克风按钮
4. 点击按钮，浏览器会请求麦克风权限，点击"允许"
5. 按钮变红并闪烁，说明正在录音
6. 清晰地说一句话，如"你好，我叫张三"
7. 再次点击按钮停止录音
8. 查看文本框，应该显示识别出的文字
9. 点击"发送"按钮发送消息

### 如何测试语音播放
1. 确保"自动播放AI语音"开关已开启
2. 发送一条消息给AI记者
3. AI回复后，应该自动开始播放语音
4. 观察是否显示蓝色的播放状态栏
5. 尝试点击暂停、继续、停止按钮
6. 检查音量是否合适，语音是否清晰

### 如何检查浏览器兼容性
**Chrome/Edge (推荐)**:
- 打开浏览器
- 按F12打开开发者工具
- 在Console标签检查是否有错误
- 所有功能应该正常工作

**Safari**:
- 语音识别和合成都应该支持
- 可能需要在设置中允许网站访问麦克风

**Firefox**:
- 可能不支持Web Speech API
- 应该显示"浏览器不支持语音识别"的提示
- 文本输入功能应该仍然可用

## 常见问题排查

### 问题1：点击麦克风按钮没反应
**可能原因**:
- 浏览器不支持语音识别
- 麦克风权限被拒绝
- 网站不是HTTPS（已排除）

**解决方法**:
- 使用Chrome浏览器
- 检查浏览器地址栏，点击麦克风图标允许权限
- 刷新页面重试

### 问题2：语音识别结果不准确
**可能原因**:
- 环境噪音太大
- 说话不清晰
- 麦克风质量问题

**解决方法**:
- 在安静环境下测试
- 说话清晰，语速适中
- 检查麦克风设备

### 问题3：听不到AI语音
**可能原因**:
- 设备音量关闭
- 浏览器静音
- 自动播放开关关闭

**解决方法**:
- 检查设备音量
- 检查浏览器标签页是否静音
- 确认"自动播放AI语音"开关已开启

### 问题4：录音时没有红色状态栏
**可能原因**:
- UI渲染问题
- 浏览器兼容性问题

**解决方法**:
- 刷新页面
- 清除浏览器缓存
- 使用Chrome浏览器

## 测试结果记录模板

```
测试日期: ____________________
测试浏览器: __________________
测试设备: ____________________

基础功能: ☐ 通过 ☐ 失败 - 备注: ________________
语音识别: ☐ 通过 ☐ 失败 - 备注: ________________
语音合成: ☐ 通过 ☐ 失败 - 备注: ________________
混合交互: ☐ 通过 ☐ 失败 - 备注: ________________
错误处理: ☐ 通过 ☐ 失败 - 备注: ________________
原有功能: ☐ 通过 ☐ 失败 - 备注: ________________
响应式设计: ☐ 通过 ☐ 失败 - 备注: ________________
性能稳定: ☐ 通过 ☐ 失败 - 备注: ________________

总体评价: ☐ 优秀 ☐ 良好 ☐ 需改进

详细问题记录:
1. ________________________________________
2. ________________________________________
3. ________________________________________
```

## 重点测试提示

1. **麦克风权限**: 这是最关键的一步，必须允许才能使用语音功能
2. **语音识别准确度**: 测试不同长度和内容的句子
3. **语音播放流畅度**: 检查是否有卡顿或断续
4. **浏览器兼容性**: 至少在Chrome和一个其他浏览器中测试
5. **移动端体验**: 如有移动设备，务必测试

## 测试完成标准

- ✅ 所有8个部分的测试项目完成率达到90%以上
- ✅ 核心功能（语音识别、语音播放）正常工作
- ✅ 没有阻塞性错误
- ✅ 原有功能不受影响
- ✅ 至少在一种浏览器中完全可用
